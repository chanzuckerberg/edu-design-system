@import '../../design-tokens/mixins.css';

/*------------------------------------*\
 # TIMELINE NAV
\*------------------------------------*/

/**
 * List of of links where each link toggles open associated information
 */
.timeline-nav {
  @apply flex gap-4 w-full overflow-hidden;
  transition: transform var(--eds-anim-fade-long) var(--eds-anim-ease);

  @media all and (min-width: $eds-bp-lg) {
    background: var(--eds-theme-color-background-neutral-default);
    border-bottom-left-radius: var(--eds-border-radius-xl);
    border-top-left-radius: var(--eds-border-radius-xl);
    transition: none;
    overflow: visible;
  }

  @media screen and (prefers-reduced-motion) {
    transition: none;
  }
}

/**
 * Active timeline nav
 *  1) Calc accounts for left and right padding of layout container (gutters on small screens)
 */
.timeline-nav.eds-is-active {
  transform: translateX(calc(-100% - 1rem));
  overflow: visible;

  @media all and (min-width: $eds-bp-lg) {
    transform: unset;
  }
}

/**
 * Timeline nav
 *
 * Contains the tab list.
 * 
 * Tab overflow behavior.
 */
.timeline-nav__nav {
  @apply block w-full shrink-0;
  padding: var(--eds-size-4) 0;

  @media all and (min-width: $eds-bp-lg) {
    @apply relative p-10 w-1/3;
    min-width: 20rem;
    flex-shrink: initial;
  }
}

/**
 * Timeline nav body 
 */
.timeline-nav__body {
  @apply block invisible z-bottom absolute;
  @apply overflow-hidden shrink-0;
  height: 0;
  width: 0;
  padding: var(--eds-size-2) 0;

  @media all and (min-width: $eds-bp-lg) {
    @apply block static z-0 w-full;
    flex: 1;
    height: auto;
    @apply overflow-visible visible;
    transform: translateX(0);
    padding: var(--eds-size-5) var(--eds-size-8);
    box-shadow: 0px 2px 8px var(--eds-theme-color-border-neutral-subtle); /* TODO: Tokenize the box shadow */
  }
}

.timeline-nav__body.eds-is-active {
  @apply static z-0 w-full h-full overflow-visible visible;

  @media all and (min-width: $eds-bp-lg) {
    transform: unset;
    height: auto;
  }
}

/**
* Timeline nav back button
* 
* On smaller viewports, a back button is placed at the top of the 
* body to allow navigation back to the list of links.
*/
.timeline-nav__back {
  text-decoration: none;

  @media all and (min-width: $eds-bp-lg) {
    display: none;
  }
}

/**
 * Timeline nav list
 *
 * Actual unordered list of timeline-nav.
 */
.timeline-nav__list {
  @mixin reset;
  list-style: none;
  @mixin eds-theme-typography-body-text;

  @media all and (min-width: $eds-bp-lg) {
    position: sticky;
    top: var(--eds-size-5);
  }
}

/**
 * Timeline nav item
 */
.timeline-nav__item {
  /* Flex shrink 0 keeps timeline-nav from expanding to fill up the space of the container. */
  @apply relative shrink-0 pb-10;

  @media all and (min-width: $eds-bp-lg) {
    padding-bottom: var(--eds-size-10);
  }
}

/**
  * Timeline nav item after
  *
  * When list variant is 'ordered', add a line between items that shouldn't link out unlike the bullet.
  */
.timeline-nav__list--ordered .timeline-nav__item {
  &:after {
    content: '';
    position: absolute;
    top: 0;
    /**
     * This sets the size of the gap above the vertical line by determining the top of the line relative to the top of the current 
     * list item; a value of 0 would position the line at the top of the current list item; 100% would position it at the bottom of
     * the current list item. We want a small visual gap between the bullet/icon and the top of the line 
     */
    left: 0.75rem;
    /**
     * This sets the height of the vertical line relative to the height of the current list item.
     * We want a small visual gap between the bottom of the line and the next bullet/icon.
     */
    height: 100%;
    width: 0.0625rem;
    /**
     * Using a border color here because this is a vertical line, similar to a border
     */
    background: var(--eds-theme-color-border-neutral-subtle);
    border-radius: var(--eds-border-radius-md);
  }

  /**
   * Last Timeline nav item
   */
  &:last-child {
    padding-bottom: 0;

    /**
     * List Timeline nav item after
     *
     * Don't add a line after the last list item.
     */
    &:after {
      content: none;
    }
  }
}

/**
 * Timeline nav link
 * 
 * Base style for each link in the list.
 *
 * Using disabled text color here because all links are "inactive" until selected and this color is overridden.
 */
.timeline-nav__link {
  @apply relative flex items-baseline gap-2;
  text-decoration: none;
  @apply text-text-neutral-subtle cursor-pointer;
  transition: color var(--eds-anim-fade-quick) var(--eds-anim-ease),
    box-shadow var(--eds-anim-fade-quick) var(--eds-anim-ease),
    background-color var(--eds-anim-fade-quick) var(--eds-anim-ease);

  &:hover,
  &:focus-visible {
    color: var(--eds-theme-color-text-neutral-default);
  }

  &:focus-visible {
    @mixin focus;
  }

  @supports not selector(:focus-visible) {
    &:hover,
    &:focus {
      color: var(--eds-theme-color-text-neutral-default);
    }

    &:focus {
      @mixin focus;
    }
  }

  @media screen and (prefers-reduced-motion) {
    transition: none;
  }

  /**
   * Timeline nav link within active timeline-nav item uses darker color
   */
  .timeline-nav__item.eds-is-active & {
    color: var(--eds-theme-color-text-neutral-default);
  }
}

/**
 * Timeline nav number
 */
.timeline-nav__number {
  /* Using flex to keep the number centered */
  @apply relative flex justify-center items-center;
  left: -4px;
  /* Since this will display as a cirlce, keep height and width equal; should be wide enough to fit a two-digit number */
  width: 1.5rem;
  height: 1.5rem;
  /* Using a percentage here instead of --eds-border-radius-md because this must always render as a circle */
  border-radius: 50%;
  /* Used on list items using number variant; provides a cosmetic cicular border */
  border: 1px solid var(--eds-theme-color-border-neutral-subtle);
  margin-right: 9px;
  font-size: var(--eds-font-size-12);
  margin-left: -4px;
  background: var(--eds-theme-color-background-neutral-default);
  /* Make the border dark when li is active */
  .timeline-nav__item.eds-is-active & {
    border: 1px solid var(--eds-theme-color-text-neutral-default);
  }
}
/**
 * Timeline nav link-left 
 */
.timeline-nav__link-left {
  position: relative;
  height: fit-content;
  padding: var(--eds-size-half) 0;
  /* Provides white background to fake a visual gap in the vertical line between nav items. */
  background: var(--eds-theme-color-background-neutral-default);
  z-index: var(--eds-z-index-100);
}

/**
  * Timeline- nav link title
  *
  * Wrapped in a div so that it doesn't affect the position of the arrow if the
  * title is long and breaks onto multiple lines.
  *
  * In the case of a long text string with no breaking spaces and/or a browser
  * with text-only-zoom, we don't want the text to overflow; truncate with an ellipsis instead.
  */
.timeline-nav__link-title {
  display: block;
  overflow: hidden;
  text-overflow: ellipsis;
}

/**Timeline nav title after
  *
  * Optional content that will be positioned to the right of title
  */
.timeline-nav__link-title-after {
  display: inline-block;
  margin-left: var(--eds-size-half);
}

/**
  * Timeline nav link arrow
  *
  * (Only used on smaller screens) - an arrow icon at the right 
  * end of each item.
  *
  * Must be used to prevent icon from shrinking to fit space.
  */
.timeline-nav__link-arrow {
  margin-left: auto;
  align-self: center;
  flex-shrink: 0;

  @media all and (min-width: $eds-bp-lg) {
    display: none;
  }
}

/**
  * Timeline nav icon
  *
  * Used so the transparent icon doesn't show the line behind. 
  */
.timeline-nav__icon {
  --icon-size: var(--eds-size-3);
  color: var(--eds-theme-color-text-neutral-subtle);
  border-color: var(--eds-theme-color-border-neutral-default);
  position: relative;
  margin-right: var(--eds-size-half);
  background: var(--eds-theme-color-background-neutral-default);
  border-radius: 100%;

  @media all and (min-width: $eds-bp-lg) {
    background: var(--eds-theme-color-background-neutral-default);
  }

  .timeline-nav__item.eds-is-active & {
    color: 1px solid var(--eds-theme-color-text-neutral-default);
    border-color: 1px solid var(--eds-theme-color-text-neutral-strong);
  }
}
