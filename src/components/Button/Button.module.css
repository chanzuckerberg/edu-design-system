@import '../../design-tokens/mixins.css';

/*------------------------------------*\
    #BUTTON
\*------------------------------------*/

/**
 * 1) Button or link that has functionality to it
 * 2) Defaults to flat button
 * 3) Margin 0 added becuase Safari has margin on the button
 */
.button {
  background-color: transparent;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin: 0; /* 3 */
  border-width: var(--eds-theme-border-width);
  border-style: solid;
  border-radius: var(--eds-theme-border-radius);
  cursor: pointer;
  transition: all var(--eds-anim-fade-quick) var(--eds-anim-ease);
  --plain-background-color: transparent;

  &:focus-visible {
    @mixin focus;
  }

  /**
   * Disabled buttons
   */
  &:disabled {
    cursor: not-allowed;
    --primary-color: var(--eds-color-neutral-300);
    --plain-background-color: transparent;

    /* stylelint-disable-next-line max-nesting-depth */
    &:hover,
    &:focus {
      --primary-color: var(--eds-color-neutral-300);
      --plain-background-color: transparent;
    }
  }

  /**
   * Inverted button 
   */
  &.button--inverted {
    border-color: var(--eds-theme-color-primary-border-inverted);
    color: var(--eds-theme-color-primary-foreground-inverted);
    /* stylelint-disable-next-line max-nesting-depth */
    &:hover,
    &:focus {
      border-color: var(--eds-theme-color-primary-border-inverted-hover);
      color: var(--eds-theme-color-primary-foreground-inverted-hover);
    }
  }
}

/*------------------------------------*\
    #VARIANTS
\*------------------------------------*/

/**
 * Primary button
 * 1) Prominent button styles that should be applied to
 *    the most important action of a page.
 */
.button--flat {
  border-color: var(--primary-color);
  background-color: var(--primary-color);
  color: var(--eds-theme-color-body-foreground-inverted);
}

/**
 * Outline Button
 * 1) A button with less visual emphasis than flat
 */
 .button--outline {
  background-color: transparent;

  border-color: var(--link-color);
  color: var(--link-color);

  &:hover,
  &:focus,
  &:active {
    color: var(--eds-theme-color-body-foreground-inverted);

    background-color: var(--primary-color);
    border-color: var(--primary-color);
  }

  /* override the hover/focus/active values */
  &:disabled {
    background-color: transparent;

    border-color: var(--primary-color);
    color: var(--primary-color);
  }

  /**
   * Inverted primary button 
   */
  &.button--inverted {
    background-color: var(--eds-theme-color-primary-background);
    color: var(--eds-theme-color-body-foreground-inverted);
    /* stylelint-disable-next-line max-nesting-depth */
    &:hover,
    &:focus {
      background-color: var(--eds-theme-color-primary-background-hover);
      color: var(--eds-theme-color-body-foreground-inverted);
    }
  }
}

/**
 * Link Button
 * 1) A button that is visually styled like a text link
 * 2) Intended to be used inline with other text, it's size is dependent
 *    on context, not on the size prop
 */
.button--link {
  padding: 0;
  border: none;
  text-decoration: underline;
  
  font-size: inherit; /* 2 */
  line-height: inherit; /* 2 */
  text-transform: inherit; /* 2 */

  color: var(--link-color);

  &:hover,
  &:focus {
    text-decoration-thickness: 2px;
  }

  &:active,
  &:disabled {
    color: var(--primary-color);
  }

  /* override the hover/focus values */
  &:disabled {
    text-decoration-thickness: auto;
  }

  /**
   * Inverted link button 
   */
  &.button--inverted {
    @mixin TextLinkInverted;
  }
}

/**
 * Plain Button
 * 1) A button that strips out borders, backgrounds, underline, etc
 * 2) Use for icons
 */
.button--plain {
  color: var(--link-color);
  border-color: var(--plain-background-color);
  background-color: var(--plain-background-color);

  &:hover,
  &:focus {
    color: var(--primary-color);
    border-color: var(--primary-color);
  }

  &:active {
    color: var(--eds-theme-color-body-foreground-inverted);

    border-color: var(--plain-background-color);
  }

  &:disabled {
    border-color: transparent;

    color: var(--primary-color);
  }

  /**
   * Inverted plain button 
   */
  &.button--inverted {
    color: var(--eds-theme-color-primary-foreground-inverted);
    /* stylelint-disable-next-line max-nesting-depth */
    &:hover,
    &:focus {
      color: var(--eds-theme-color-primary-foreground-inverted-hover);
      background-color: transparent;
    }
  }
}

/*------------------------------------*\
    #COLORS
\*------------------------------------*/

/**
  * Brand button
  */
.button--color-brand {
  --primary-color: var(--eds-color-brand-blue-600);
  --link-color: var(--eds-color-brand-blue-700);

  &:hover,
  &:focus {
    --primary-color: var(--eds-color-brand-blue-700);
    --link-color: var(--eds-color-brand-blue-800);
    --plain-background-color: var(--eds-color-brand-blue-100);
  }

  &:active {
    --primary-color: var(--eds-color-brand-blue-800);
    --plain-background-color: var(--eds-color-brand-blue-600);
  }
}

/**
  * Alert button
  */
.button--color-alert {
  --primary-color: var(--eds-color-other-red-600);
  --link-color: var(--eds-color-other-red-700);

  &:hover,
  &:focus {
    --primary-color: var(--eds-color-other-red-700);
    --link-color: var(--eds-color-other-red-800);
    --plain-background-color: var(--eds-color-other-red-100);
  }

  &:active {
    --primary-color: var(--eds-color-other-red-800);
    --plain-background-color: var(--eds-color-other-red-600);
  }
}

/**
  * Neutral button
  */
.button--color-neutral {
  --primary-color: var(--eds-color-neutral-500);
  --link-color: var(--eds-color-neutral-600);

  &:hover,
  &:focus {
    --primary-color: var(--eds-color-neutral-600);
    --link-color: var(--eds-color-neutral-700);
    --plain-background-color: var(--eds-color-neutral-100);
  }

  &:active {
    --primary-color: var(--eds-color-neutral-700);
    --plain-background-color: var(--eds-color-neutral-500);
  }
}

/**
  * Success button
  */
.button--color-success {
  --primary-color: var(--eds-color-other-green-600);
  --link-color: var(--eds-color-other-green-700);

  &:hover,
  &:focus {
    --primary-color: var(--eds-color-other-green-700);
    --link-color: var(--eds-color-other-green-800);
    --plain-background-color: var(--eds-color-other-green-100);
  }

  &:active {
    --primary-color: var(--eds-color-other-green-800);
    --plain-background-color: var(--eds-color-other-green-600);
  }
}

/**
  * Warning button
  */
.button--color-warning {
  --primary-color: var(--eds-color-other-orange-600);
  --link-color: var(--eds-color-other-orange-700);

  &:hover,
  &:focus {
    --primary-color: var(--eds-color-other-orange-700);
    --link-color: var(--eds-color-other-orange-800);
    --plain-background-color: var(--eds-color-other-orange-100);
  }

  &:active {
    --primary-color: var(--eds-color-other-orange-800);
    --plain-background-color: var(--eds-color-other-orange-600);
  }
}

/*------------------------------------*\
    #SIZES
\*------------------------------------*/

/**
 * Small button
 * 1) Height is used instead of vertical padding because the icon size we use would
 *    cause the button height to expand
 */
.button--sm {
  @mixin eds-theme-typography-button-sm;
  height: var(--eds-size-3); /* 1 */
  padding-left: var(--eds-size-half);
  padding-right: var(--eds-size-half);
}

/**
 * Medium button
 * 1) Height is used instead of vertical padding because the icon size we use would
 *    cause the button height to expand
 */
.button--md {
  @mixin eds-theme-typography-button-md;
  height: var(--eds-size-4); /* 1 */
  padding-left: var(--eds-size-2);
  padding-right: var(--eds-size-2);
}

/**
 * Large button
 * 1) Height is used instead of vertical padding because the icon size we use would
 *    cause the button height to expand
 */
.button--lg {
  @mixin eds-theme-typography-button-lg;
  height: var(--eds-size-5); /* 1 */
  padding-left: var(--eds-size-2);
  padding-right: var(--eds-size-2);
}

/*------------------------------------*\
    #FULL-WIDTH
\*------------------------------------*/

/**
 * Full-width button
 * 1) A block button fills 100% of the width of its container
 */
.button--full-width {
  width: 100%;
}

/*------------------------------------*\
    #ICONS
\*------------------------------------*/

/**
 * Button Icon
 * 1) Set SVG icon fill to the current text color
 */
.button__icon {
  fill: currentColor; /* 1 */
}

/**
 * Button text before icon spacing
 * 1) Controls the spacing between the button text
 *    and the icon that comes _before_ button text
 */
.button__icon + .button__text {
  margin-left: var(--eds-size-1); /* 1 */

  .button--sm & {
    margin-left: var(--eds-size-half);
  }
}

/**
 * Button after icon spacing
 * 1) Controls the spacing between the button text
 *    and the icon that comes _after_ button text
 */
.button__text + .button__icon {
  margin-left: var(--eds-size-1); /* 1 */

  /**
   * Button icon after button text within a link variant button
   */
  .button--link & {
    margin-left: var(--eds-size-half);
  }

  .button--sm & {
    margin-left: var(--eds-size-half);
  }
}

/*------------------------------------*\
    #LOADING
\*------------------------------------*/

/**
 * Loading icon rotiation style
 */
.button.eds-is-loading > .button__icon {
  animation: rotateIcon 2s linear infinite; /* 1 */
  overflow: visible;
}

/**
 * Loading icon rotation animation
 */
@keyframes rotateIcon {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
