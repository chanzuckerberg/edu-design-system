import { Canvas, Meta } from '@storybook/blocks';

<Meta title="Documentation/Theming" />

# Theming

Below are instructions on how to use the tooling, configs, and tokens to define custom theme values for a project.

## Using Tailwind with the Default Theme

Out of the box, EDS provides a basic tailwind configuration to use in any project. The provided EDS tailwind config hooks up EDS tokens to useful utility classes and some screen sizes. To import the tailwind config into the app's tailwind config, supply the [theme](https://tailwindcss.com/docs/theme) property for use:

```ts
// in your tailwind.config.ts
import edsConfig from '@chanzuckerberg/eds/tailwind.config';

module.exports = {
  content: ['./app/**/*.{ts,tsx,jsx,js}'],
  theme: edsConfig.theme,
  // ... any other tailwind config
};
```

If you only want part of the provided settings, you can review the [Tailwind Theme Customization][tailwind-theme] documentation, and the contents of the [provided config][eds-tailwind-config], and apply the parts you want to use.

[tailwind-theme]: https://tailwindcss.com/docs/theme
[eds-tailwind-config]: https://github.com/chanzuckerberg/edu-design-system/blob/main/tailwind.config.ts

<hr />

## Setting up and using the theming tooling

EDS comes with some optional tooling to allow easy transfer of theme data from Figma (or some style-dictionary compatible format) into code.

- `eds-init-theme` - This command creates the initial file(s) for theming your application
- `eds-apply-theme` - This command parses the local config file to generate the tokens used by EDS components and tools

Each of these tools reads config to figure out where to read/write files.

First, create a configuration file to determine the source and destination directories. This can be defined in a new file `.edsrc.json` in your project root. Example:

```json
// in a new file .edsrc.json
{
  "src": "src/components/",
  "dest": "src/components/"
}
```

`src` determines where the core theme file will be copied to (upon running `eds-init-theme`) OR read from (upon running `eds-apply-theme`), and `dest` determines where the generated project files will be written to. Once created, you can use the provided commands.

### eds-init-theme

Command to run: `npx eds-init-theme`

This will create a new JSON file `app-theme.json` that defines ALL the available tokens for EDS that you can edit. It will copy the template file to configured `src` path in your project.

This file is a baseline config to be used later in the process.

### eds-apply-theme

Command to run: `npx eds-apply-theme`

Using `eds-apply-theme` will read in the newly-created `app-theme.json` file, and create the tokens to use in your project.

Once run, you will have a set of theme files written to the configured `dest` path:

- `app-theme.css` (CSS file containing custom CSS variables with the theme values for the application)
- `app-tailwind-theme.config.json` (Configuration file for advanced tailwind configuration in the application)

To use, add this file to your core app root file **after** where the imported EDS's `@chanzuckerberg/eds/index.css` file is inserted.

## Custom Theming and Tailwind

When you have your own custom theme, you can use the tokens provided in `app-tailwind-theme.config.json` to do advanced tailwind configuration. This file contains all the tokens in JSON format, mapped to the literal values in your local theme.

You can use similar import values to what is in `@chanzuckerberg/eds/tailwind.config.ts` in your local tailwind configuration file:

```ts
// in your tailwind.config.ts file
import type { Config } from 'tailwindcss';
import baseConfig from '@chanzuckerberg/eds/tailwind.config';
import {eds as customTokens} from "<edsrc.json:dest>/app-tailwind-theme.config"; // where <edsrc.json:test> is the path configured in .edsrc.json

const {
  background: backgroundColorTokens,
  border: borderColorTokens,
  text: textColorTokens,
  ...colorTokens
} = customTokens.theme.color;

// export the following
export default {
  ... // your local content export
  theme: {
    colors: {
      ...colorTokens,
    },
    extend: {
      backgroundColor: {
        ...backgroundColorTokens,
      },
      borderColor: {
        ...borderColorTokens,
      },
      textColor: {
        ...textColorTokens,
      },
    },
    screens: {
      ...baseConfig.theme.screens, // you can mix in any base config values into the local theme
    }
    ... // any local theme settings
  }
} satisfies Config

```

<hr />

If there are any future updates to the theme, edit the contents of `app-theme.json`, then re-run `npx eds-apply-theme`. Then commit the changes, and that's it!