import { Canvas, Meta } from '@storybook/blocks';

<Meta title="Documentation/Theming" />

# Theming overview

"Theming", in the context of EDS, is the process of overriding the default styles of EDS components to match a different brand (or "theme"). The "Theming" directory in storybook demonstrates examples of theming:

- A [wireframe theme](./?path=/story/pages-theming-wireframedemo--default) (an unbranded theme that can be used for prototyping a product before it has an official visual style).

## How to apply a theme in another product

EDS comes with some tooling to allow easy transfer of theme data from Figma (or some style-dictionary compatible format) into code.

* `eds-init-theme` - This command sets up the initial file(s) for theming your application
* `eds-apply-theme` - This command parses the style dictionary files to generate the tokens (CSS Variables) used by EDS

Each of these tools reads config to figure out where to read/write files. This can be defined in several ways, e.g., a top-level file `eds.config.js`, or as a key-value set in package.json. Example:

`package.json`

```json
"eds": {
  "json": "src/components/",
  "css": "src/components/"
},
```

`json` determines where the core theme file will be stored, and `css` determines where the resulting css token file will be stored.

### eds-init-theme

EDS comes pre-packaged with token values that define the base style and character of the system. Users of EDS can theme certain aspects of all components, or details on specific components. This tool will set up your project to have its own theme overrides.

This will create an initial JSON file that defines ALL the available tokens for EDS.

```json
{
  "eds": {
    "anim": {
      "fade": {
        "quick": {
          "value": "0.15s"
        },
        "long": {
          "value": "0.4s"
        }
      },
      "move": {
        "quick": {
          "value": "0.15s"
        },
        "medium": {
          "value": "0.3s"
        },
        "long": {
          "value": "0.4s"
        }
      },
      "ease": {
        "value": "ease"
      }
    },
    // ...other token values
  },
}
```

### eds-apply-theme

After initializing the theme file, make changes to the JSON to reflect what has been defined by design. When changes are made, you can generate the corresponding CSS values using `eds-apply-theme`.

Once run, you will have a CSS file that includes a set of token values that can be used in the app as appropriate.

```css
/**
 * Do not edit directly
 * Generated on Sunday, 01 Jan 2023 12:34:56 GMT
 * To update, edit app-theme.json, then run `npx eds-apply-theme`
 */

:root {
  --eds-anim-fade-quick: 0.15s;
  --eds-anim-fade-long: 0.4s;
  --eds-anim-move-quick: 0.15s;
  --eds-anim-move-medium: 0.3s;
  --eds-anim-move-long: 0.4s;
  --eds-anim-ease: ease;
/* ...other token values... */
}
```

Add this file to your core app root file. That's it! Now, your theme will be applied to the tokens used by EDS components. Further changes require re-running `eds-apply-theme`.

## How to manually apply a theme in another product

You can also manage the creation of theme token definitions manually. In EDS, theming is implemented by overriding the values of the CSS variables representing tokens, which the EDS components use in their styles. This should update the style of the components to match the branding of a different product with minimum manual CSS styling overrides. (Some manual styling overrides will be necessary though because we don't have tokens for every little detail. In those cases, we could create a new token to make those overrides easier if it looks like something that could very well be useful for other products as well.)

These CSS variables overrides lives in the products using EDS components. This allows product teams to quickly iterate on their theme without making changes to EDS itself.

You can find the full list of CSS variables in [src/tokens-dist/css/variables.css](https://github.com/chanzuckerberg/edu-design-system/blob/main/src/tokens-dist/css/variables.css), and you can see examples of overriding them in [.storybook/pages/WireframeDemo/GlobalStyles.module.css](https://github.com/chanzuckerberg/edu-design-system/blob/main/.storybook/pages/WireframeDemo/GlobalStyles.module.css).

If you're looking to set up a prototype using the [wireframe theme](./?path=/story/pages-theming-wireframedemo--default), you can copy and paste the variables defined in [.storybook/pages/WireframeDemo/GlobalStyles.module.css](https://github.com/chanzuckerberg/edu-design-system/blob/main/.storybook/pages/WireframeDemo/GlobalStyles.module.css). (The placeholder images will need to be added separately.)

If you are trying to customize the styling of a component but find that the style you want to override does not yet have a token for you to redefine, you can reach out to us to discuss whether a new token should be added.

## How to support theming in EDS

Since other products rely on CSS variable tokens to theme EDS components, it's very important that, when working with color, components in the EDS package only use CSS variables representing tier 2 and tier 3 tokens for styling. EDS component styling should never use tier 1 tokens, JavaScript variables representing tokens, or raw hex codes. Non-color styling can use tokens from any tier. (This is only relevant to the EDS components themselves; examples in storybook or in other products do not need to follow this rule.)
